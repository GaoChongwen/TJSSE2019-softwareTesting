<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <title>基于区块链的学生管理系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- The styles -->
    <link id="bs-css" href="css/bootstrap-cerulean.min.css" rel="stylesheet">

    <link href="css/charisma-app.css" rel="stylesheet">
    <link href='bower_components/fullcalendar/dist/fullcalendar.css' rel='stylesheet'>
    <link href='bower_components/fullcalendar/dist/fullcalendar.print.css' rel='stylesheet' media='print'>
    <link href='bower_components/chosen/chosen.min.css' rel='stylesheet'>
    <link href='bower_components/colorbox/example3/colorbox.css' rel='stylesheet'>

    <link href='  bower_components/datatables/media/css/jquery.dataTables.css' rel='stylesheet'>

    <link href='bower_components/responsive-tables/responsive-tables.css' rel='stylesheet'>

    <link href='css/jquery.noty.css' rel='stylesheet'>
    <link href='css/noty_theme_default.css' rel='stylesheet'>
    <link href='css/elfinder.min.css' rel='stylesheet'>
    <link href='css/elfinder.theme.css' rel='stylesheet'>
    <link href='css/jquery.iphone.toggle.css' rel='stylesheet'>
    <link href='css/uploadify.css' rel='stylesheet'>
    <link href='css/animate.min.css' rel='stylesheet'>
    <link href='css/app.css' rel='stylesheet'>

    <link href='css/custom.min.css' rel='stylesheet'>
    <link href='font-awesome/css/font-awesome.min.css' rel='stylesheet'>

    <style>
        .fc-today {
            background-color: #2AA2E6;
            color: #fff;


        }

        .fc-button-today {
            display: none;
        }

        .green {
            color: #1ABB9C;
        }
    </style>
    <style media="screen">
        body {
            color: #154d88;
            background: rgba(233, 237, 241, 0.27);
            font-family: "Helvetica Neue", Roboto, Arial, "Droid Sans", sans-serif;
            font-size: 13px;
            font-weight: 400;
            line-height: 1.471;
        }
    </style>
    <!-- jQuery -->
    <script src="bower_components/jquery/jquery.min.js"></script>

    <!-- The fav icon -->

</head>

<body>
    <div id="basal">
        <!-- topbar starts -->
        <div class="navbar navbar-default" role="navigation">

            <div class="navbar-inner">
                <button type="button" class="navbar-toggle pull-left animated flip">
                    <span class="sr-only">切换导航</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <span class="iname">基于区块链的学生管理系统</span>

                <!-- user dropdown starts -->
                <div class="btn-group pull-right">
                    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">

                        <i class="glyphicon glyphicon-user"></i><span id="userType" class="hidden-sm hidden-xs">
                            管理员</span>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="/settings"><i class="glyphicon glyphicon-user"></i> 个人资料</a></li>
                        <li class="divider"></li>
                        <li><a href="./School_Manage.html"><i class="glyphicon glyphicon-log-out"></i> 退出登录</a></li>
                    </ul>
                </div>
                <!-- Addmission dropdown starts -->
                <div class="btn-group pull-right">
                    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">

                        <i class="glyphicon glyphicon-th-large"></i><span class=""> 报单</span>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="/applicants"><i class="glyphicon glyphicon-th-list"></i> 成绩表</a></li>
                        <li class="divider"></li>
                        <li><a href="/regonline" target="_blank"><i class="glyphicon glyphicon-print"></i> 部分简历</a></li>
                        <li><a href="allResumeSheet.html" target="_blank"><i class="glyphicon glyphicon-print"></i>
                                全部简历</a></li>


                    </ul>
                </div>
                <!-- admission dropdown ends -->



                <!-- 证书 dropdown starts -->
                <div id="nav-records" class="btn-group pull-right">
                    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">

                        <i class="glyphicon glyphicon-book"></i><span class=""> 证书</span>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">

                        <li><a href="/library/search"><i class="glyphicon glyphicon-search"></i> 查看我的证书</a></li>
                        <li><a href="/library/issuebook"><i class="glyphicon glyphicon-pencil"></i> 借书</a></li>
                        <li><a href="/library/issuebookview"><i class="glyphicon glyphicon-list"></i> 已借出书单</a></li>
                        <li class="divider"></li>
                        <li><a href="/library/view-show"><i class="glyphicon glyphicon-list"></i> 审查申请</a></li>
                        <li><a href="/library/addbook"><i class="glyphicon glyphicon-pencil"></i> 从文件添加</a></li>
                        <li><a href="/library/reports"><i class="glyphicon glyphicon-print"></i> 书籍报告</a></li>
                        <li><a href="/library/reports/fine"><i class="glyphicon glyphicon-print"></i> 月度罚款记录</a></li>


                    </ul>
                </div>
                <!-- 证书 dropdown ends -->
                <!-- Dormitory dropdown starts -->
                <div id="nav-course" class="btn-group pull-right">
                    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">

                        <i class="glyphicon glyphicon-home"></i><span class=""> 课程</span>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">

                        <li><a href="/dormitory"><i class="glyphicon glyphicon-home"></i> 宿舍详情</a></li>
                        <li><a href="/dormitory/assignstd"><i class="glyphicon glyphicon-plus"></i> 添加学生</a></li>
                        <li><a href="/dormitory/assignstd/list"><i class="glyphicon glyphicon-user"></i> 学生列表</a></li>
                        <li class="divider"></li>
                        <li><a href="/dormitory/fee"><i class="glyphicon glyphicon-list"></i> 住宿费用</a></li>
                        <li><a href="/dormitory/report/std"><i class="glyphicon glyphicon-print"></i> 宿舍情况报告</a></li>
                        <li><a href="/dormitory/report/fee"><i class="glyphicon glyphicon-print"></i> 费用报单</a></li>

                    </ul>
                </div>
                <!-- Dormitory dropdown ends -->
                <!-- fees dropdown starts-->
                <div id="nav-grades" class="btn-group pull-right">
                    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">

                        <i class="glyphicon glyphicon-list-alt"></i><span class=""> 成绩</span>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="/fees/view"><i class="glyphicon glyphicon-search"></i> 查看我的成绩</a></li>
                        <li><a href="/fee/collection"><i class="glyphicon glyphicon-pencil"></i> 登记课程成绩</a></li>

                        <li class="divider"></li>
                        <li><a href="/fees/list"><i class="glyphicon glyphicon-list"></i> 查看班级成绩</a></li>
                        <li><a href="/fees/setup"><i class="glyphicon glyphicon-cog"></i> 费用设置</a></li>
                        <li class="divider"></li>
                        <li><a href="/fees/report"><i class="glyphicon glyphicon-print"></i> 收费情况报单</a></li>

                    </ul>
                </div>
            </div>
        </div>
        <!-- topbar ends -->

        <!-- front starts -->
        <div class="ch-container">
            <div class="row">

                <!-- left menu starts -->
                <div class="col-sm-2 col-lg-2">
                    <div class="sidebar-nav">
                        <div class="nav-canvas">
                            <div class="nav-sm nav nav-stacked">

                            </div>
                            <ul class="nav nav-pills nav-stacked main-menu">
                                <li class="nav-header">主菜单</li>
                                <li><a class="ajax-link" href="./dashboard.html"><i
                                            class="glyphicon glyphicon-th-large"></i><span>
                                            主页</span></a>
                                </li>

                                <li class="accordion" id="index_class">
                                    <a href="#"><i class="glyphicon glyphicon-home"></i><span> 专业</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li><a href="createMajor.html">新增专业</a></li>
                                        <li><a href="majorList.html">专业列表</a></li>
                                    </ul>
                                </li>
                                <li class="accordion" id="index_subject">
                                    <a href="#"><i class="glyphicon glyphicon-book"></i><span> 课程</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li id="add_stu_child"><a href="createSubject.html">新增</a></li>
                                        <li id="course_list"><a href="subjectList.html">课程列表</a></li>
                                        <li id="stu_elect_sub"><a href="electSubject.html">选课</a></li>
                                    </ul>
                                </li>
                                <li class="accordion" id="index_stu">
                                    <a href="#"><i class="glyphicon glyphicon-user"></i><span> 学生</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li><a href="createStudent.html">新增</a></li>
                                        <li><a href="studentList.html">学生列表</a></li>

                                    </ul>
                                </li>
                                <li class="accordion" id="index_teacher">
                                    <a href="#"><i class="glyphicon glyphicon-user"></i><span> 教职员工</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li><a href="createTeacher.html">新增</a></li>
                                        <li><a href="teacherList.html">教师列表</a></li>
                                    </ul>
                                </li>
                                <li class="accordion" id="index_com">
                                    <a href="#"><i class="glyphicon glyphicon-user"></i><span> 合作公司</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li><a href="createFirm.html">新增</a></li>
                                        <li><a href="firmList.html">公司列表</a></li>
                                    </ul>
                                </li>
                                <li class="accordion" id="index_record">
                                    <a href="#"><i class="glyphicon glyphicon-pencil"></i><span> 证书记录</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li><a id="add_from_file" href="applyRecord.html">从文件添加</a></li>
                                        <li><a id="view_my_record" href="recordList.html">查看我的证书</a></li>
                                        <li id="view_record"><a href="checkRecord.html">审查申请</a></li>

                                    </ul>
                                </li>
                                <li class="accordion" id="index_grade">
                                    <a href="#"><i class="glyphicon glyphicon-list-alt"></i><span> 成绩管理</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li><a id="create_grade" href="createMarkManage.html">登记课程成绩</a></li>
                                        <li><a id="stu_grade" href="myMarks.html">查看我的成绩</a></li>
                                        <li><a id="tea_grade" href="MarkManagelist.html">查看班级成绩</a></li>
                                    </ul>
                                </li>
                                <li class="accordion" id="index_verify">
                                    <a href="#"><i class="glyphicon  glyphicon glyphicon-list"></i><span>
                                            链上验证</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li><a href="resultsForVistor.html">快速验证</a></li>
                                    </ul>
                                </li>
                                <li class="accordion" id="index_print">
                                    <a href="#"><i class="glyphicon glyphicon-print"></i><span> 报单中心</span></a>
                                    <ul class="nav nav-pills nav-stacked">
                                        <li><a href="gradesheet.html">成绩表</a></li>
                                        <li><a href="partResumeSheet.html">自选简历</a></li>
                                        <li><a href="allResumeSheet.html">全部简历</a></li>
                                    </ul>
                                </li>

                            </ul>

                        </div>
                    </div>
                </div>
                <!--/span-->
                <!-- left menu ends -->

                <div id="content" class="col-lg-10 col-sm-10">
                    <!-- content starts -->


                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <!-- /top tiles -->
                            <div class="row tile_count text-center">
                                <div class="col-md-4 col-sm-4 col-xs-6 tile_stats_count">
                                    <span id="stuNum" class="count_top"><i class="fa fa-2x fa-users green"></i> 学生</span>
                                    <div class="count red">2</div>
                                </div>
                                <div class="col-md-4 col-sm-4 col-xs-6 tile_stats_count">
                                    <span class="count_top"><i class="fa fa-2x fa-users green"></i> 教师</span>
                                    <div class="count blue">1</div>
                                </div>
                                <div class="col-md-4 col-sm-4 col-xs-6 tile_stats_count">
                                    <span id="comNum" class="count_top"><i class="fa fa-2x fa-users green"></i> 合作机构</span>
                                    <div class="count yellow">1</div>
                                </div>
                            </div>
                            <div class="row tile_count text-center">
                                <div class="col-md-4 col-sm-4 col-xs-6 tile_stats_count">
                                    <span id="subNum" class="count_top"><i class="fa fa-2x fa-pencil green"></i>课程</span>
                                    <div class="count blue">7</div>
                                </div>
                                <div class="col-md-4 col-sm-4 col-xs-6 tile_stats_count">
                                    <span id="cerNum" class="count_top"><i class="fa fa-2x fa-book green"></i> 已认证证书</span>
                                    <div class="count yellow">8</div>
                                </div>
                                <div class="col-md-4 col-sm-4 col-xs-6 tile_stats_count">
                                    <span id="verNum" class="count_top"><i class="fa fa-2x fa-edit green"></i> 链上验证次数</span>
                                    <div class="count red">68</div>
                                </div>


                            </div>
                            <!-- /top tiles -->
                            <!-- Graph start -->
                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>累计已上链条目<small>（月度）</small></h2>
                                            <label id="curChain" class="total_bal">
                                                总上链: 49条
                                            </label>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content"><iframe class="chartjs-hidden-iframe"
                                                style="width: 100%; display: block; border: 0px; height: 0px; margin: 0px; position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px;"></iframe>
                                            <canvas height="136" id="lineChart" width="821"
                                                style="width: 821px; height: 136px;"></canvas>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-9 col-lg-9 col-xs-9 hidden-xs">
                </div>
            </div>
        </div>

    </div>
    <!-- external javascript -->

    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- library for cookie management -->
    <script src="js/jquery.cookie.js"></script>
    <!-- calender plugin -->
    <script src='bower_components/moment/min/moment.min.js'></script>
    <script src='bower_components/fullcalendar/dist/fullcalendar.min.js'></script>
    <!-- data table plugin -->
    <script src='bower_components/datatables/media/js/jquery.dataTables.js'></script>

    <!-- select or dropdown enhancer -->
    <script src="bower_components/chosen/chosen.jquery.min.js"></script>
    <!-- plugin for gallery image view -->
    <script src="bower_components/colorbox/jquery.colorbox-min.js"></script>
    <!-- notification plugin -->
    <script src="js/jquery.noty.js"></script>
    <!-- library for making tables responsive -->
    <script src="bower_components/responsive-tables/responsive-tables.js"></script>

    <!-- star rating plugin -->
    <script src="js/jquery.raty.min.js"></script>
    <!-- for iOS style toggle switch -->
    <script src="js/jquery.iphone.toggle.js"></script>
    <!-- autogrowing textarea plugin -->
    <script src="js/jquery.autogrow-textarea.js"></script>
    <!-- multiple file upload plugin -->

    <script src="js/jquery.history.js"></script>
    <!-- application script for Charisma demo -->
    <script src="js/basic.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/Chart.min.js"></script>

    <script type="text/javascript">
        var curChain = 49;
        var stuNum = 2;
        var teaNum = 1;
        var comNum = 1;
        var cerNum = 8;
        var subNum = 7;
        var verNum = 68;
        var gradeNum = 26;
        var recordNum=15;


        $(document).ready(function () {
            getCurData();
            setNum();
        });
        Chart.defaults.global.legend = {
            enabled: false
        };

        // Line chart
        var ctx = document.getElementById("lineChart");
        var lineChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ["09,2018", "10,2018", "11,2018", "12,2018", "01,2019", "02,2018", "03,2018"],
                datasets: [{
                    label: "Grade",
                    backgroundColor: "rgba(38, 185, 154, 0.31)",
                    borderColor: "rgba(38, 185, 154, 0.7)",
                    pointBorderColor: "rgba(38, 185, 154, 0.7)",
                    pointBackgroundColor: "rgba(38, 185, 154, 0.7)",
                    pointHoverBackgroundColor: "#fff",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointBorderWidth: 1,
                    data: [0, 0, 3, 10, 15, 15,gradeNum]
                }, {
                    label: "Record",
                    backgroundColor: "rgba(3, 125, 75, 0.3)",
                    borderColor: "rgba(3, 88, 106, 0.70)",
                    pointBorderColor: "rgba(3, 75, 83, 0.70)",
                    pointBackgroundColor: "rgba(3, 88, 106, 0.70)",
                    pointHoverBackgroundColor: "#fff",
                    pointHoverBorderColor: "rgba(151,187,205,1)",
                    pointBorderWidth: 1,
                    data: [0, 0, 0, 2, 8, 8, recordNum]
                }, {
                    label: "Certification",
                    backgroundColor: "rgba(3, 88, 106, 0.3)",
                    borderColor: "rgba(3, 88, 106, 0.70)",
                    pointBorderColor: "rgba(3, 88, 106, 0.70)",
                    pointBackgroundColor: "rgba(3, 88, 106, 0.70)",
                    pointHoverBackgroundColor: "#fff",
                    pointHoverBorderColor: "rgba(151,187,205,1)",
                    pointBorderWidth: 1,
                    data: [0, 0, 0, 0, 3, 3, cerNum]
                }]
            },
        });

        function getCurData() {
            $.ajax({
                url: sessionStorage.host + 'indexData',
                type: 'get',
                offline: false,
                success: function (msg) {
                    console.log(msg);
                    stuNum = msg["stuNum"];
                    teaNum = msg["teaNum"];
                    comNum = msg["comNum"];
                    cerNum = msg["cerNum"];
                    subNum = msg["subNum"];
                    verNum = msg["verNum"];
                    gradeNum=msg["gradeNum"];
                    recordNum=msg["recordNum"];
                    curChain = cerNum+gradeNum+recordNum;
                }
            })
        }

        function setNum(){
            $("curChain").text(toString(curChain));
            $("stuNum").text(toString(stuNum));
            $("teaNum").text(toString(teaNum));
            $("comNum").text(toString(comNum));
            $("cerNum").text(toString(cerNum));
            $("subNum").text(toString(subNum));
            $("verNum").text(toString(verNum));
        }

    </script>
</body>

</html>